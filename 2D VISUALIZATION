import matplotlib.pyplot as plt
from sklearn.decomposition import PCA
from sklearn.manifold import TSNE

def pca_visualization(data):
  pca=PCA(n_components=2)
  principal_components = pca.fit_transform(data.iloc[:,:-1])
  plt.scatter(principal_components[:,0], principal_components[:,1],
c=data.iloc[:,-1]
  plt.title('PCA Visualization')
  st.pyplot(plt)

def tsne_visualization(data):
  tsne = TSNE(n_components=2)
  tsne_results = tsne.fit_transform(data.iloc[:,:-1]
  plt.scatter(tsne_results[:,0], tsne_results[:,1], c=data.iloc[:,-1])
  plt.title('t-SNE Visualization')
  st.pyplot(plt)

if uploaded_file is not None:
  st.header("2D Visualization")
  visualization_option = st.selectbox("Select a visualization method", ["PCA", "t-SNE"])
  if visualization_option == "PCA":
    pca_visualization(data)
  elif visualization_option == "t-SNE":
    tsne_visualization(data)
